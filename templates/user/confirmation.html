{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Confirm Your Booking - UNITEN</title>
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'bootstrap_icones/iconsfonts/bootstrap-icons.css' %}">

</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">UNITEN Booking</a>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link active" href="{% url 'studentdashboard' %}">
            <i class="bi bi-house-door"></i> Dashboard
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="container mt-5">
    <h2 class="mb-4 text-success">
      <i class="bi bi-check-circle-fill"></i> Confirm Your Booking
    </h2>

    <div class="card shadow-lg border-success">
      <div class="card-header bg-success text-white">
        <h5 class="mb-0"><i class="bi bi-info-circle"></i> Selected Room Details</h5>
      </div>
      <div class="card-body">
        <p class="mb-2"><strong><i class="bi bi-door-closed"></i> Room Name:</strong> <span id="roomName"></span></p>
        <p class="mb-2"><strong><i class="bi bi-building"></i> Block:</strong> <span id="roomBlock"></span></p>
        <p class="mb-2"><strong><i class="bi bi-layers-half"></i> Level:</strong> <span id="roomLevel"></span></p>
        <p class="mb-4"><strong><i class="bi bi-tag-fill"></i> Type:</strong> <span id="roomType"></span></p>
        <p class="mb-4"><strong><i class="bi bi-cash"></i> Price:</strong> <span id="roomPrice"></span></p>


        <div class="text-end">
          <button class="btn btn-success me-2" id="confirmBtn">
            <i class="bi bi-check-lg"></i> Confirm Booking
          </button>
          <a href="{% url 'apply_room' %}" class="btn btn-danger">
            <i class="bi bi-x-circle"></i> Cancel
          </a>
        </div>
      </div>
    </div>
  </div>

 <script>
  const selectedRoom = JSON.parse(sessionStorage.getItem("selectedRoom"));

  if (!selectedRoom) {
    alert("No room selected. Redirecting...");
    window.location.href = "{% url 'apply_room' %}";
  } else {
    document.getElementById("roomName").textContent = selectedRoom.name;
    document.getElementById("roomBlock").textContent = selectedRoom.block;
    document.getElementById("roomType").textContent = selectedRoom.type;
    document.getElementById("roomLevel").textContent = selectedRoom.level;


    // âœ… Price logic
    let price = "";
    if (selectedRoom.type.toLowerCase() === "premium") {
      price = "RM 575";
    } else if (selectedRoom.type.toLowerCase() === "deluxe") {
      price = "RM 420";
    } else {
      price = "N/A";
    }
    document.getElementById("roomPrice").textContent = price;
  }

  document.getElementById("confirmBtn").addEventListener("click", function () {
  
    window.location.href = `{% url 'final_confirmation' %}?room_id=${selectedRoom.id}`;
  });
</script>


  <script src="{% static 'bootstrap-5.3.3-dist/js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
